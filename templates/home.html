<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Главная</title>
		<meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="static/css/main.css">
		<link rel="stylesheet" type="text/css" href="static/css/home.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
	</head>
	<body>
        <div class="left">
            <div class="top">
                <h1>Главная</h1>
                <a href="/profile"><div class="profile">
                    <div class="decor">
                        <p>Профиль</p>
                    </div>
                </div></a>
            </div>

            <div class="bottom">
                <div class="find">
                    <h2>Поиск пользователей</h2>

                    <div class="FIND_FIELD"> <!-- имя класса FIND_FIELD не менять !!! -->
                        <form class="find_form">
                            <input type="text" name="find" class="find_input" placeholder="Поиск">
                            <input type="submit" class="submit" value="Найти">
                        </form>
                    </div>

                    <!-- Тут появляются:
                    
                    <div class="account">
                        <img>
                        <p class="name"></p>
                        <p class="status"></p>
                        <a class="link"></a>
                    </div>

                    изменить можно в script.js -->
                
                </div> <!-- find -->

                <div class="chats"> <!-- имя класса chats не менять !!! -->
                    <h2>Чаты</h2>
                    {% for chat in chats %}
                        {% if chat.exist %}
                        <a href="/open_chat_with_user/{{ chat.user2.ID }}">
                            <div class="chat">
                                <img class="icon">
                                <p class="name">{{ chat.user2.name }}</p>
                                <p class="status">status</p>
                                {% if chat.show_last_message %}
                                    <p class="last">{{ chat.last_message.data }}</p>
                                {% endif %}
                            </div>
                        </a>
                        {% endif %}
                    {% endfor %}
                </div> <!-- chats -->
            </div> <!-- left -->
        </div> <!-- bottom -->
        <div class="right">
            
            <div class="top">
                {% if accaunt.chat_opened and accaunt.opened_chat.exist %}
                    <a href="/view_profile/{{accaunt.opened_chat.user2.ID}}"><div class="chat_topicleft">
                        <div class="img_avatar"><img class="chat_avatar"></div>
                        <h2 class="chat_name">{{accaunt.opened_chat.user2.name}}</h2>
                        <p class="status">Не в сети</p>
                    </div></a>
                    <div class="chat_topicright">
                        <div class="photo"><p>фото</p></div>
                        <div class="video"><p>видео</p></div>
                        <div class="files"><p>файлы</p></div>
                    </div>
                {% endif %}
            </div> <!-- top -->
            
            <!-- Тут появляются:
            
            
            <div class="main">
                тут сообщения чата типо:
                
                <message>
                    <text> text </text>
                    <time> time </time>
                    ...
                </message>
                
                ...
            </div>

            -->


            {% if accaunt.chat_opened %}
                <div class="send">
                    <form class="send_form">
                        <input type="text" class="input">
                        <input type="submit" class="submit">
                    </form>
                </div>
            {% endif %}
        </div> <!-- right -->
    </body>
    
    <script src="static/js/home.js"></script>
    <script>setup(
        "{{'true' if accaunt.chat_opened else 'false'}}",
        "{{accaunt.opened_chat.id if accaunt.chat_opened else -1}}",
        "0",
        "{{accaunt.opened_chat.last_message_id}}",
        "{{accaunt.opened_chat.user1_ID}}")</script>
    {% if accaunt.chat_opened %}
        <script>open_chat("{{ accaunt.opened_chat.ID }}")</script>
    {% endif %}
</html>