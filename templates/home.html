<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Главная</title>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="static/css/main.css">
		<link rel="stylesheet" type="text/css" href="static/css/home.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
		<script src="static/js/script.js"></script>
		<script>use_theme("{{ account.theme[:96] }}")</script>
		<script src="static/js/home.js"></script>
		<script>
			setup(
				"{{'true' if account.chat_opened else 'false'}}",
				"{{account.opened_chat.id if account.chat_opened else -1}}",
				"0",
				"{{account.opened_chat.last_message_id}}",
				"{{account.opened_chat.user1_ID}}")
		</script>
	</head>
	<body>
		<div class="left">
			<div class="top">
				<h1>Главная</h1>
				<a href="/profile"><div class="profile">
					<div class="decor">
						<p>Профиль</p>
					</div>
				</div></a>
			</div>

			<div class="bottom">
				<div class="find">
					<h2>Поиск пользователей</h2>
					<div class="FIND_FIELD"> <!-- имя класса FIND_FIELD не менять !!! -->
						<form class="find_form">
							<input type="text" class="find_input" name="find" placeholder="Поиск">
							<input type="submit" id="lab">
							<div class="find_button">
								<label for="lab">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="find_svg">
										<path d="m496 59.685h-480c-8.837 0-16 7.164-16 16v360.631c0 8.836 7.163 16 16 16h480c8.837 0 16-7.164 16-16v-360.631c0-8.837-7.163-16-16-16zm-16 32v260.061l-80.686-87.614c-3.029-3.29-7.298-5.161-11.77-5.161s-8.74 1.872-11.77 5.161l-79.199 86-115.054-138.702c-3.04-3.665-7.554-5.785-12.314-5.785s-9.274 2.121-12.314 5.785l-124.893 150.561v-270.306zm-448 320.426 137.206-165.406 144.011 173.61h-281.217zm322.793 8.204-37.602-45.331 70.354-76.396 92.455 100.396v21.332h-125.207zm-46.742-166.63c31.154 0 56.5-25.346 56.5-56.5s-25.346-56.5-56.5-56.5-56.5 25.346-56.5 56.5 25.345 56.5 56.5 56.5zm0-81c13.51 0 24.5 10.991 24.5 24.5s-10.99 24.5-24.5 24.5-24.5-10.991-24.5-24.5 10.99-24.5 24.5-24.5z">
										</path>
									</svg>
								</label>
							</div>
						</form>
					</div>
					<script> setup_find() </script>
					
					<!--

					<a>
						<div class="account">
							<img>
							<p class="name"></p>
							<p class="status"></p>
							<a class="symbol"></p>
						</div>
					</a>

					-->

					<!-- on find_response   -->
				
				</div> <!-- find -->

				<div class="chats"> <!-- имя класса chats не менять !!! -->
					<h2> Чаты </h2>
					{% for chat in chats %}
						{% if chat.exist %}
							<a href="/open_chat_with_user/{{ chat.user2.ID }}">
								<div class="chat">
									<img class="icon" src="{{ chat.user2.icon }}">
									<p class="name">{{ chat.user2.name }}</p>
									<p class="status">status</p>
									{% if chat.show_last_message %}
										<p class="last">{{ chat.last_message.data[:10] }}</p>
									{% else %}
										<p class="last empty">Empty</p>
									{% endif %}
								</div>
							</a>
						{% endif %}
					{% endfor %}
				</div> <!-- chats -->
			</div> <!-- left -->
		</div> <!-- bottom -->
		<div class="right">
			
			<div class="top">
				{% if account.chat_opened %}
					<a href="/view_profile{{account.opened_chat.user2.ID}}">
						<div class="chat_topicleft">
							<div class="img_avatar">
								<img class="chat_avatar" src="{{ account.opened_chat.user2.icon }}">
							</div>
							<div class="krasota">
								<p class="chat_name">{{account.opened_chat.user2.name}}</p>
								<p class="status">Не в сети</p>
							</div>
						</div>
					</a>
					<div class="chat_topicright">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512.04267" class="photo">
							<path d="m496 59.685h-480c-8.837 0-16 7.164-16 16v360.631c0 8.836 7.163 16 16 16h480c8.837 0 16-7.164 16-16v-360.631c0-8.837-7.163-16-16-16zm-16 32v260.061l-80.686-87.614c-3.029-3.29-7.298-5.161-11.77-5.161s-8.74 1.872-11.77 5.161l-79.199 86-115.054-138.702c-3.04-3.665-7.554-5.785-12.314-5.785s-9.274 2.121-12.314 5.785l-124.893 150.561v-270.306zm-448 320.426 137.206-165.406 144.011 173.61h-281.217zm322.793 8.204-37.602-45.331 70.354-76.396 92.455 100.396v21.332h-125.207zm-46.742-166.63c31.154 0 56.5-25.346 56.5-56.5s-25.346-56.5-56.5-56.5-56.5 25.346-56.5 56.5 25.345 56.5 56.5 56.5zm0-81c13.51 0 24.5 10.991 24.5 24.5s-10.99 24.5-24.5 24.5-24.5-10.991-24.5-24.5 10.99-24.5 24.5-24.5z"></path>
						</svg>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="video">
							<path d="m16 2c-7.7197266 0-14 6.2802734-14 14s6.2802734 14 14 14 14-6.2802734 14-14-6.2802734-14-14-14zm0 26c-6.6166992 0-12-5.3833008-12-12s5.3833008-12 12-12c6.6171875 0 12 5.3833008 12 12s-5.3828125 12-12 12z"/><path d="m23.5351562 12.3608398c-.5507812-.2202148-1.1738281-.1074219-1.6083984.2895508l-1.8349609 1.3626099v-1.4163208c0-1.1450195-.9316406-2.0766602-2.0771484-2.0766602h-6.4321289c-.5834961 0-1.1435547.2475586-1.5366211.6791992l-2.0058594 2.2050781c-.3481446.3833009-.5400391.8793946-.5400391 1.3969727v4.6020508c0 1.1450195.9316406 2.0766602 2.0771484 2.0766602h8.4375c1.1455078 0 2.0771484-.9316406 2.0771484-2.0766602v-1.4163208l1.8349609 1.3626099c.2871094.2626953.65625.4018555 1.0322266.4018555.1933594 0 .3886719-.0371094.5761719-.1123047.5859376-.2358399.9648438-.7958985.9648438-1.4277344v-4.4228516c0-.6318359-.3789062-1.1918945-.9648438-1.4277344zm-5.4433593 7.0424805c0 .0424805-.0341797.0766602-.0771484.0766602h-8.4375c-.0424805 0-.0771485-.0341797-.0771485-.0766602l.0200195-4.6538086 2.0048828-2.2041016c.0146484-.0161133.0356445-.0253906.0576172-.0253906h6.4321289c.0429688 0 .0771484.0341797.0771484.0766602v6.8066406zm4.4082031-2.1186523-1.7294922-1.284668 1.7294922-1.284668z"/>
						</svg>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="files">
							<path d="m15.5858 2.5858 3.8284 3.8284c.3751.3751.5858.8838.5858 1.4142v12.1716c0 1.1046-.8954 2-2 2h-12c-1.1046 0-2-.8954-2-2v-16c0-1.1046.8954-2 2-2h8.1716c.5304 0 1.0391.2107 1.4142.5858z"></path>
							<path d="m20 7.8284v.1716h-4c-1.1046 0-2-.8954-2-2v-4h.1716c.5305 0 1.0391.2107 1.4142.5858l3.8284 3.8284c.3751.3751.5858.8838.5858 1.4142z"></path>
							<path d="m6 22.5h12c1.3784 0 2.5-1.1216 2.5-2.5v-12.1714c0-.668-.2603-1.2959-.7324-1.7681l-3.8281-3.8281c-.4722-.4722-1.1001-.7324-1.7681-.7324h-8.1714c-1.3784 0-2.5 1.1216-2.5 2.5v16c0 1.3784 1.1216 2.5 2.5 2.5zm8.5-19.961c.2749.0613.5282.1965.7324.4005l3.8281 3.8281c.2039.2042.3391.4575.4005.7324h-3.461c-.8271 0-1.5-.6729-1.5-1.5zm-10 1.461c0-.8271.6729-1.5 1.5-1.5h7.5v3.5c0 1.3784 1.1216 2.5 2.5 2.5h3.5v11.5c0 .8271-.6729 1.5-1.5 1.5h-12c-.8271 0-1.5-.6729-1.5-1.5zm4.1465 11.3535c-.1953-.1953-.1953-.5117 0-.707s.5117-.1953.707 0l2.1465 2.1465v-4.793c0-.2764.2236-.5.5-.5s.5.2236.5.5v4.793l2.1465-2.1465c.1953-.1953.5117-.1953.707 0s.1953.5117 0 .707l-3 3c-.0977.0977-.2256.1465-.3535.1465s-.2559-.0488-.3535-.1465z"></path>
						</svg>	
					</div>
						
				{% endif %}
			</div> <!-- top -->
			{% if account.chat_opened %}
				<div class="main2"><div class="main">
					{% for message in account.opened_chat.get_last_messages() %}
						<div class="message" {% if message.sender == account.ID %} id="my" {% endif %}>
							<div class="box">
								{% if account.opened_chat.__class__.__name__ == "Group" %}
									<p class="sender">Sender</p> <!-- TODO -->
								{% endif %}
								<div class="data">{{ message.data }}</div>
								<div class="info">
									<p class="time">{{ message.time[0:2] + ":" + message.time[2:4] + ":" + message.time[4:6] }}</p>
									<p class="symbol">+</p> <!-- TODO -->
								</div>
								<meta_ class="_ID">{{ message.ID }}</meta_>
								<meta_ class="_visible">{{ message.visible }}</meta_>
							</div>
						</div>
					{% endfor %}
				</div></div> <!-- main -->

				<div class="send">
					<form class="send_form">
						<input type="submit" class="submit_input" id="ssvg">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="add_svg">
							<path d="m496 59.685h-480c-8.837 0-16 7.164-16 16v360.631c0 8.836 7.163 16 16 16h480c8.837 0 16-7.164 16-16v-360.631c0-8.837-7.163-16-16-16zm-16 32v260.061l-80.686-87.614c-3.029-3.29-7.298-5.161-11.77-5.161s-8.74 1.872-11.77 5.161l-79.199 86-115.054-138.702c-3.04-3.665-7.554-5.785-12.314-5.785s-9.274 2.121-12.314 5.785l-124.893 150.561v-270.306zm-448 320.426 137.206-165.406 144.011 173.61h-281.217zm322.793 8.204-37.602-45.331 70.354-76.396 92.455 100.396v21.332h-125.207zm-46.742-166.63c31.154 0 56.5-25.346 56.5-56.5s-25.346-56.5-56.5-56.5-56.5 25.346-56.5 56.5 25.345 56.5 56.5 56.5zm0-81c13.51 0 24.5 10.991 24.5 24.5s-10.99 24.5-24.5 24.5-24.5-10.991-24.5-24.5 10.99-24.5 24.5-24.5z">
							</path>
						</svg>

						<input type="text" class="text_input" placeholder="Написать сообщение...">
						<div class="send_button">
							<input type="submit" class="submit_input" id="ssvg">
							<label for="ssvg">
								Отправить нахуй
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="send_svg">
									<path d="m496 59.685h-480c-8.837 0-16 7.164-16 16v360.631c0 8.836 7.163 16 16 16h480c8.837 0 16-7.164 16-16v-360.631c0-8.837-7.163-16-16-16zm-16 32v260.061l-80.686-87.614c-3.029-3.29-7.298-5.161-11.77-5.161s-8.74 1.872-11.77 5.161l-79.199 86-115.054-138.702c-3.04-3.665-7.554-5.785-12.314-5.785s-9.274 2.121-12.314 5.785l-124.893 150.561v-270.306zm-448 320.426 137.206-165.406 144.011 173.61h-281.217zm322.793 8.204-37.602-45.331 70.354-76.396 92.455 100.396v21.332h-125.207zm-46.742-166.63c31.154 0 56.5-25.346 56.5-56.5s-25.346-56.5-56.5-56.5-56.5 25.346-56.5 56.5 25.345 56.5 56.5 56.5zm0-81c13.51 0 24.5 10.991 24.5 24.5s-10.99 24.5-24.5 24.5-24.5-10.991-24.5-24.5 10.99-24.5 24.5-24.5z">
									</path>
								</svg>
							</label>
							
						</div>
					</form>
				</div> <!-- send -->
				<script>send_setup()</script>
			{% else %}
				<p class="NoChatText">Выберите кому вы хотите написать</p>
			{% endif %}
		</div> <!-- right -->
	</body>
</html>